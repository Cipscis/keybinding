(()=>{"use strict";class e extends Array{constructor(e){if("string"!=typeof e)throw new RangeError("KeyBind: Constructor argument must be a string");super(0);const t=e.trim().split(/\s+/g);for(const e of t)this.push(e)}toString(){return this.join(" ")}match(e){if(e.length!==this.length)return!1;for(const[t,r]of e.entries()){const e=this[t];if(!r.match(e))return!1}return!0}}const t=Object.freeze({alt:/\balt\+/g,ctrl:/\b(control|ctrl|command|cmd|meta)\+/g,shift:/\bshift\+/g}),r=Object.freeze({space:" ",spacebar:" ",up:"arrowup",right:"arrowright",down:"arrowdown",left:"arrowleft",esc:"escape"});class n{constructor(e){if(!("key"in e))throw new RangeError("KeyPress: key is a required option");this.key=e.key,this.modifiers={altKey:e.altKey||!1,ctrlKey:e.metaKey||e.ctrlKey||!1,shiftKey:e.shiftKey||!1}}match(e){const n={altKey:!1,ctrlKey:!1,shiftKey:!1};t.alt.test(e)&&(n.altKey=!0,e=e.replace(t.alt,"")),t.ctrl.test(e)&&(n.ctrlKey=!0,e=e.replace(t.ctrl,"")),t.shift.test(e)&&(n.shiftKey=!0,e=e.replace(t.shift,""));for(const e in n)if(n[e]&&!this.modifiers[e])return!1;return e.toLowerCase()===this.key.toLowerCase()||r[e.toLowerCase()]===this.key.toLowerCase()}}const s=new Map,o=Object.freeze({allowInInput:!1}),i=(t,r,s)=>{const i=Object.assign({},o,s),c=new e(t),a=[];return function(e){if(["Alt","Control","Meta","Shift"].includes(e.key))return;if(!i.allowInInput&&l(document.activeElement))return;if(u(document.activeElement))return;const t=new n(e);a.push(t),a.length>c.length&&a.shift(),c.match(a)&&(a.splice(0),r.apply(this,arguments))}},c=(e,t,r)=>{s.has(e)||s.set(e,new Map);const n=s.get(e);if(n.has(t))return;const o=i(e,t,r);document.addEventListener("keydown",o),n.set(t,o)},a=(e,t)=>{const r=s.get(e);if(!r)return;const n=r.get(t);document.removeEventListener("keydown",n),r.delete(t)},l=function(e){const t=e.nodeName.toLowerCase();let r=!1;if(["textarea","select"].includes(t))r=!0;else if("input"===t){r=!0;const t=(e.attributes.type?.value||"text").toLowerCase();["button","checkbox","color","file","hidden","image","radio","range","reset","submit"].includes(t)&&(r=!1)}else e.isContentEditable&&(r=!0);return r},u=function(e){let t=!1;return"input"===e.nodeName.toLowerCase()&&"password"===(e.attributes.type?.value||"text").toLowerCase()&&(t=!0),t},d=e=>t=>{document.querySelector(".js-text-message").textContent=e};c("a",d("You pressed the 'a' key")),c("ctrl+m",d("You pressed Ctrl + 'm'"),{allowInInput:!0});const h="up up down down left right left right b a enter",f=d("Hey, stop cheating!");c(h,f),document.querySelector(".js-unbind-sequence").addEventListener("click",(e=>a(h,f)));const y=d("You pressed the 'k' key");document.querySelector(".js-bind").addEventListener("click",(e=>c("k",y,{allowInInput:!0}))),document.querySelector(".js-unbind").addEventListener("click",(e=>a("k",y)))})();
//# sourceMappingURL=bundle.js.map